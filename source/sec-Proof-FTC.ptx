<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-Proof-FTC" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Justifying THE Fundamental Theorem of Calculus</title>
  <introduction>
    <p>
      It turns out that THE fundamental theorem of calculus says the integration and differentiation are inverse processes. 
      That is, they will cancel each other. 
      This relation (at least half of it) is captured in the Fundamental Theorem of Calculus, Part II, in your textbook page 326. 
      I also included it below: 
    </p>

    <theorem xml:id="thm-FTC">
      <title>The Fundamental Theorem of Calculus</title>
      <statement>
        <p>
          Let <m>f</m> be a continuous function on an open interval <m>I</m> and let <m>a</m> be in <m>I</m>. 
          Then the definite integral of <m>f</m> from <m>a</m> to <m>x</m>, aka the accumulation function, is an <em>antiderivative</em> of <m>f</m> on <m>I</m>. 
          That is, 
          <men xml:id="eqn-thm-FTC-A">
            A'(x) = f(x)
          </men>
          Equivalently, 
          <men xml:id="eqn-thm-FTC-I">
            \frac{d}{dx}\int_a^x f(t)\, dt = f(x)
          </men>
        </p>
      </statement>
    </theorem>
    <p>
      You may be wondering <alert>why</alert> differentiation will cancel the integration. 
      Well your textbook provided a technical proof in this section using the fancy Squeeze Theorem. 
      In this investigation, we will explore the (same) proof but in a more intuitive sense. 
    </p>
    <p>
        <alert>P.S.: </alert> If you get stuck, feel free to find the technical proof in the textbook for inspiration (or ask Richard for help/hint). 
    </p>
  </introduction>
  
  <exercises>
  <title>Part (a): Starting Point - Set up the Expression</title>
    <statement>
      <p>
        Since the Fundamental Theorem of Calculus involved some derivatives, so let's do a quick review on what derivatives represents! 
      </p> 
      <p> 
        Recall that derivatives represent the instantaneous rate of change of some function at a specific value, and we can find the instantaneous rate of change by taking the limit of the average rate of change of a function as the gap between the <m>x</m> values are going to 0. 
      </p>
      <p>
        Set up an expression to represent <m>\displaystyle \frac{d}{dx}\int_a^x f(t)\, dt</m> by 
        (1) first setting up a fraction to represent the average rate of change of the  function (which function), and then 
        (2) taking the limit of the fraction as the gap of the <m>x</m> values approaches 0. 
      </p>
      <p>
        <alert>P.S.:</alert> I included some hints below to help you get started, as a good setup is important for the next two parts of the investigation. 
        If you need help or have questions, make sure to reach out to Richard. 
        Feel free to reach out to him too if you just want to confirm that you have the right setup. 
      </p>
    </statement>
    
    <hint>
      <title>If you need help on the symbolic definition of derivatives... </title>
      <p>
        Below is the definition of derivative: 
        <definition xml:id="def-derivatives">
        <statement>
            <p>
                Let <m>f</m> be a function differentiable at <m>x</m>. 
                Then the derivative of <m>f</m>, denoted as <m>f'(x)</m>, is defined by 
                <men xml:id="eqn-def-Derivatives">
                    f'(x) = \lim_{h\to 0}\frac{f(x + h) - f(x)}{h}
                </men>
                
            </p>
        </statement>
      </definition>
      </p>
    </hint>

    <hint>
      <title>If you need help on picking the function... </title>
      <p>
        Recall there are two functions involved, the accumulation function, <m>A</m>, and another function under which we are finding the area, <m>f</m>. 
        Based on the Fundamental Theorem of Calculus, which function are we taking the derivative of, <m>A</m> or <m>f</m>? 
      </p>
    </hint>

    <solution>
        <p>
          The function we are taking the derivative of in the theorem is the accumulation function, <m>A</m>. 
          Then we can set up the expression by applying the limit definition of derivatives to the function <m>A</m> as follows. 
          <me>
            A'(x) = \lim_{h\to 0} \frac{A(x + h) - A(x)}{h}
          </me>
          Recall that the fraction, without the limit symbol, represents the average rate of change of the area under the curve from <m>t = x</m> to <m>t = x + h</m>. 
          By taking the limit of the average rate of change as the gap from <m>x</m> to <m>x + h</m> approaches 0, we obtain the instantaneous rate of change, aka the derivative. 
        </p>
      </solution>

  </exercises>

  <exercises>
  <title>Part (b): Average Rate of Change of the Area</title>
    <statement>
      <p>
        Let's focus on the average rate of change of the area. 
        I coded a pretty picture below to help you visual the situation. 
      </p>
      
      <figure xml:id="fig-Proof-FTC">
      <image width="60%">
    
        <latex-image >
          \begin{tikzpicture}
            \begin{axis}[
              axis lines=middle,
              xlabel={$t$},
              ylabel={$y$},
              xmin=-2, xmax=4,
              ymin=-2, ymax=5,
              xtick=\empty,
              ytick=\empty,
              domain=-1.7:3.6,
              samples=100, 
              ]

              % Shade the Regins
              \addplot [
                draw=none,
                fill=green!70,
                opacity=0.7,
              ]
              coordinates {
                (0.5,0)
                (0.5,{1/5*(0.5+1)*(2*0.5-3)*(0.5-3) + 2})
                (1, {1/5*(1+1)*(2*1-3)*(1-3) + 2})
                (1.5, {1/5*(1.5+1)*(2*1.5-3)*(1.5-3) + 2})
                (2, {1/5*(2+1)*(2*2-3)*(2-3) + 2})
                (2,0)
              } -- cycle;

              \addplot [
                draw=none,
                fill=orange!80,
                opacity=0.7,
              ]
              coordinates {
                (2,0)
                (2, {1/5*(2+1)*(2*2-3)*(2-3) + 2})
                (2.25, {1/5*(2.25+1)*(2*2.25-3)*(2.25-3) + 2})
                (2.5, {1/5*(2.5+1)*(2*2.5-3)*(2.5-3) + 2})
                (2.5,0)
              } -- cycle;
              
              % Vertical dashed lines
              \draw[dashed] (axis cs:0.5,-0.15) -- (axis cs:0.5,3.5);
              \draw[dashed] (axis cs:2,-0.15) -- (axis cs:2,1.4);
              \draw[dashed] (axis cs:2.5,-0.15) -- (axis cs:2.5,1.3);

              % Labels
              \node at (axis cs:0.5,-0.4) {$a$};
              \node at (axis cs:2,-0.4) {$x$};
              \node at (axis cs:2.8,-0.37) {$x+h$};
              \node at (axis cs:2.8,3.6) {$y = f(t)$};

              % Graph of the function
              \addplot[blue, ultra thick, smooth] {1/5*(x+1)*(2*x-3)*(x-3)+2};
        
            \end{axis}
          \end{tikzpicture}
        </latex-image>

      </image>
      </figure>
      
      <p>
        Simplify the fraction representing the <alert>average rate of change</alert> from <m>x</m> to <m>x + h</m> you came up with in part (a). 
        Keep in mind that the goal for part (c) is to find the instantaneous rate of change so feel free to assume <m>h</m> here is a small number. 
      </p>
    </statement>
    
    <hint>
      <title>If you need help on sorting out different area components...</title>
      <p>
        Part of your expression in part (a) should contain something like <m>A(x + h)</m> and <m>A(x)</m>. 
        What do they represent, in terms of color, in the graph provided? 
      </p>
      <p>
        Again, part of your expression in part (a) should contain something like <m>A(x + h) - A(x)</m>. 
        Which color in the graph represent this expression and how can we rewrite it using ONE definite integral? 
      </p>
    </hint>

    <hint>
      <title>If you need help on approximating the area of interest...</title>
      <p>
        We learned some cool methods to approximate area under the curve in section 5.1. 
        Let's use one of them to approximate the area of interest. 
      </p>
      <p>
        But... how many rectangles should I split up the area to? 
        Recall that we assume <m>h</m> is a very small number. 
        That means using ONE skinny rectangle should suffice to apprixomate the area since <m>h</m> is super very really small. 
      </p>
      <p>
        Also... which approximation method from section 5.1 should I use here... left-endpoint or right-endpoint approximation? 
        Well Richard would say just pick one, following your heart. 
      </p>
    </hint>

    <solution>
      <p>
        Now let's focus on simplifying the average rate of change, 
        <me>
          \frac{A(x + h) - A(x)}{h}
        </me>
      </p>
      <p>
        By looking at the pretty figure, we observe that
        <ul>
          <li>
            <p>
              <m>A(x + h)</m> represents the total area of the green and orange region.  
            </p>
          </li>
          <li>
            <p>
              <m>A(x)</m> represents the area of the green region.  
            </p>
          </li>
        </ul>
        This implies that <m>A(x + h) - A(x)</m> should give us the area of the orange region. 
        Remember that <m>h</m> is a super very really small number, so the orange region should be a super skinny strip whose area can approximated using a rectangle. 
      </p>
      
      <p>
        Recall the fancy left-endpoint and right-endpoint approximation we learned back in section 5.1? 
        They seem like great methods to approximate the area of the skinny orange strip. 
        The width of the orange strip is <m>h</m> and the height is either <m>f(x)</m> or <m>f(x + h)</m> depending on which method you picked. 
        It turns out it doesn't matter which one you picked as the height since <m>h</m> is super very really small anyway. 
        For demonstration, I will pick <m>f(x + h)</m> as the height of the orange strip. 
        Then the average rate of change of the area is
        <me>
          \frac{A(x + h) - A(x)}{h} = \frac{h\cdot f(x + h)}{h} = f(x + h)
        </me>
        
      </p>
    </solution>

  </exercises>

  <exercises>
  <title>Part (c): Instantaneous Rate of Change of the Area</title>
    <statement>
      <p>
        Now that you have figured out the average rate of change of the area under the curve, what is the instantaneous rate of change (aka the derivative) of the accumulation function? 
      </p>
      <p>
        That is, what is the limit of the average rate of change you found in part (b) as <m>h</m> approaches 0. 
      </p>
    </statement>
    
    <hint>
      <title>If you need help on evaluating the limit...</title>
      <p>
        You should have an integral-free expression by now since you "approximated" the area using a skinny rectangle in part (b). 
        Now that we have an expression to work with, what is the very first step you should do to evaluate the limit that your calculus 1 instructor told you, especially if you took calculus 1 with me. 
      </p>
    </hint>

    <p>
      If you play your cards right, the limit of the average rate of change, aka the derivative of the accumulation function, should be <m>f(x)</m>. 
      What!!?? Differentiation undo the integration indeed! 
    </p>

    <solution>
      <p>
        Now that we figured out the average rate of change, the derivative is just the limit of the average rate of change we found in part (b) as <m>h</m> approaches 0. That is, 
        <me>
          A'(x) = \lim_{h\to 0} f(x + h) = f(x + 0) = f(x)
        </me>
        We proved it! 
      </p>
    </solution>

  </exercises>

  <p>
    Julie also proved the FTC in one of her lecture videos. Feel free to check it out if you are more of a visual person! 
  </p>
  <p>
    Here is the video: <url href="https://media.pdx.edu/media/t/1_82n44iqx">https://media.pdx.edu/media/t/1_82n44iqx</url>
  </p>

  <exercises>
    <title>When you complete the tasks... </title>
    <p>
      Take a break and celebrate that you worked through all the complicated symbols and proved the Fundamental Theorem of Calculus! 
    </p>
    <p>
      Then continue to the 
      <url href="https://richardzhao-math.github.io/MTH252-Sum23/sec-Proof-FTC-Corollary.html">next assignment</url> 
      this week by exploring the proof of the corollary of the Fundamental Theorem of Calculus, which is the big theorem in section 5.4 that you will be using again and again and again in this class!
    </p>
  </exercises>

</section>